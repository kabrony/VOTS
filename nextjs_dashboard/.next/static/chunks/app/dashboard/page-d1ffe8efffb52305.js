(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2917:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),l=s(2265),n=s(8680);let o=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:9000";function r(){let[e,t]=(0,l.useState)(""),[s,r]=(0,l.useState)([{role:"assistant",content:"Welcome to synergy chat with PDF ingestion."}]),[c,d]=(0,l.useState)(null),[i,x]=(0,l.useState)(""),[p,g]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,n.io)(o,{transports:["websocket"]});return e.on("connect",()=>{console.log("Socket connected to synergy agent!")}),e.on("synergy-event",e=>{r(t=>[...t,{role:"assistant",content:e}])}),()=>{e.disconnect()}},[]);let u=(0,l.useCallback)(()=>{e.trim()&&(r(t=>[...t,{role:"user",content:e}]),t(""))},[e]),f=async e=>{if(e.preventDefault(),!c){g("Please select a PDF file first.");return}try{let e=new FormData;e.append("file",c),i&&e.append("doc_category",i);let t=await fetch("".concat(o,"/pdf/upload_pdf"),{method:"POST",body:e}),s=await t.json();t.ok?g("Upload success: ".concat(s.message||JSON.stringify(s))):g("Upload error: ".concat(s.detail||s.error||JSON.stringify(s)))}catch(e){console.error(e),g("Upload failed. Check console logs.")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-black text-gray-100 p-4 flex flex-col space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-green-400",children:"Synergy Dashboard"}),(0,a.jsx)("p",{className:"text-red-500 text-sm font-semibold",children:"Experimental â€“ LLM usage has cost; synergy logs used for advanced improvements."})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex-1 bg-[#0e0e0e] border border-gray-700 rounded p-4 flex flex-col",children:[(0,a.jsx)("h2",{className:"text-orange-400 font-bold text-lg mb-2",children:"Synergy Chat"}),(0,a.jsx)("div",{className:"overflow-y-auto bg-black/20 rounded p-3 flex-1 mb-4 font-mono",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"mb-2 whitespace-pre-wrap ".concat("user"===e.role?"text-orange-400":"text-green-400"),children:[(0,a.jsx)("span",{className:"text-gray-500 mr-1",children:"user"===e.role?">":"#"}),e.content]},t))}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 bg-black/50 border border-gray-600 rounded px-3 py-2 text-gray-100 font-mono focus:outline-none focus:border-orange-500",placeholder:"Type synergy message...",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>"Enter"===e.key&&u()}),(0,a.jsx)("button",{onClick:u,className:"bg-orange-500 text-black px-4 py-2 rounded font-bold hover:bg-orange-400",children:"Send"})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 bg-[#0e0e0e] border border-gray-700 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-blue-400 font-bold text-lg mb-2",children:"Upload PDF"}),(0,a.jsxs)("form",{onSubmit:f,className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Select PDF:"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{e.target.files&&e.target.files.length>0?d(e.target.files[0]):d(null)},className:"text-sm text-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Document Category (optional):"}),(0,a.jsx)("input",{type:"text",className:"bg-black/50 border border-gray-600 rounded px-2 py-1 text-gray-100 w-full",placeholder:"e.g. finance, legal...",value:i,onChange:e=>x(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",className:"bg-[#00ff66] text-black px-4 py-2 rounded font-bold hover:bg-[#00c653]",children:"Upload"})]}),p&&(0,a.jsx)("p",{className:"mt-3 text-xs text-yellow-400 whitespace-pre-wrap",children:p})]})]})]})}}},function(e){e.O(0,[324,971,117,744],function(){return e(e.s=2917)}),_N_E=e.O()}]);